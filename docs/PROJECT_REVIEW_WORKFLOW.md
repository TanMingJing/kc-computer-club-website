# 项目审核流程说明

## 📋 完整工作流程

### 1️⃣ 学生提交项目计划

**学生操作**:
1. 登录后访问 `/projects/submit` 
2. 填写项目信息（名称、描述、目标、团队成员等）
3. 点击"提交项目计划"按钮
4. 项目状态为 **待审核** (pending)

---

## 2️⃣ 管理员审核项目

### 访问审核页面
```
登录管理后台 → 项目审核 (/admin/projects)
```

### 可见的项目列表
- **所有项目** - 显示所有提交的项目
- **待审核** - 只显示 pending 状态的项目
- **已批准** - 显示 approved 的项目
- **已拒绝** - 显示 rejected 的项目
- **需修改** - 显示 revision 状态的项目

### 项目统计卡片
页面顶部显示四个统计卡片：
- 总项目数
- 待审核数
- 已批准数
- 已拒绝数

---

## 3️⃣ 管理员操作

### 打开项目详情
1. 在项目列表中点击要审核的项目
2. 弹出蓝色主题的项目详情模态框
3. 可以看到项目的所有信息

### 填写反馈意见
在模态框下方的"管理员反馈"输入框中输入：
- 审批意见
- 修改建议
- 需要改进的地方

```
反馈输入框位置：
└─ 项目详情模态框
   └─ 管理员反馈区域（textarea）
```

### 选择操作（3 种）

**选项 1: 批准项目** ✅
```
按钮: [✓ 批准]
效果:
  - 项目状态 → approved
  - 学生项目详情页显示 ✅已批准
  - 学生可以查看项目检查清单
  - 反馈框消失（不显示反馈）
```

**选项 2: 拒绝项目** ❌
```
按钮: [✗ 拒绝]
反馈: 可选
效果:
  - 项目状态 → rejected
  - 学生项目详情页显示 ❌已拒绝
  - 如有反馈，学生可以看到拒绝原因
```

**选项 3: 要求修改** 🔄
```
按钮: [⚙ 要求修改]
反馈: 必填（否则提示错误）
效果:
  - 项目状态 → revision (需修改)
  - 学生看到 🔄需修改状态
  - 学生看到管理员的修改意见
  - 学生可以重新编辑项目
  - 学生重新提交后，状态回到 pending
```

---

## 🎓 学生端体验

### 学生查看反馈

**访问位置**:
```
学生登录 → 项目 → 点击自己的项目 (/projects/[id])
```

### 看到的内容

#### 1. 项目状态标签
```
┌─────────────────────────┐
│  ✅ 已批准               │  - 绿色背景
│  🔄 需修改              │  - 蓝色背景
│  ❌ 已拒绝              │  - 红色背景
│  ⏳ 待审核              │  - 黄色背景
└─────────────────────────┘
```

#### 2. 如果有管理员反馈
```
页面内容：
  ├─ 项目描述
  ├─ 项目目标
  ├─ 时间线和资源
  ├─ 项目链接
  ├─ 团队成员
  │
  └─ 【管理员反馈】← 只有反馈时显示
     └─ 反馈内容（灰色卡片）
        ├─ "这个项目需要更多细节..."
        ├─ "考虑添加..."
        └─ "修改后请重新提交"
```

### 学生的操作选项

**如果状态是"需修改"**:
```
学生可以：
  1. 点击"编辑项目"按钮
  2. 修改项目信息
  3. 重新提交
  → 项目状态回到"待审核"
  → 管理员收到新的审核请求
```

**如果状态是"已批准"**:
```
学生可以：
  1. 查看项目检查清单
  2. 添加任务和追踪进度
  3. 向管理员更新进度
```

**如果状态是"已拒绝"**:
```
学生可以：
  1. 查看拒绝原因（管理员反馈）
  2. 编辑项目（重新添加或创建新项目）
```

---

## 📊 状态流转图

```
┌─────────────────┐
│   学生提交      │
│   pending       │
└────────┬────────┘
         │
    ┌────▼────────┐
    │ 管理员审核   │
    └────┬────────┘
         │
   ┌─────┼──────┬────────┐
   │     │      │        │
   ▼     ▼      ▼        ▼
┌──────┐ │  ┌──────┐ ┌────────┐
│批准  │ │  │拒绝  │ │要求修改│
│✅     │ │  │❌     │ │🔄      │
│approved
│ │  │rejected
│ │revision
└──┬──┘ │  └──┬───┘ └───┬─────┘
   │     │      │        │
   │     │      │   ┌────▼─────┐
   │     │      │   │ 学生修改  │
   │     │      │   └────┬──────┘
   │     │      │        │
   │     │      └────────┤ 重新提交
   │     │               │
   ▼     ▼               ▼
  显示 隐藏           回到pending
  清单 清单
```

---

## ✅ 完整功能清单

| 功能 | 学生端 | 管理端 | 状态 |
|------|--------|--------|------|
| 查看项目反馈 | ✅ | - | ✅ 已实现 |
| 填写管理员意见 | - | ✅ | ✅ 已实现 |
| 修改项目状态 | - | ✅ | ✅ 已实现 |
| 批准项目 | - | ✅ | ✅ 已实现 |
| 拒绝项目 | - | ✅ | ✅ 已实现 |
| 要求修改 | - | ✅ | ✅ 已实现 |
| 查看修改意见 | ✅ | - | ✅ 已实现 |
| 重新提交修改 | ✅ | - | ✅ 已实现 |
| 查看项目检查清单 | ✅ | - | ✅ 已实现 |

---

## 🔍 常见问题

### Q1: 学生为什么看不到管理员反馈？
**原因**: 管理员还没有添加反馈意见  
**解决**: 管理员需要在"要求修改"或"拒绝"时填写反馈

### Q2: 项目"需修改"后，学生怎么重新提交？
**流程**:
1. 学生在项目详情页点击"编辑项目"
2. 修改项目信息
3. 保存变更
4. 状态自动回到"待审核"
5. 管理员收到新的审核请求

### Q3: 管理员反馈什么时候显示？
**时机**:
- ✅ 状态为"需修改"时，反馈始终显示
- ✅ 状态为"已拒绝"时，反馈显示
- ❌ 状态为"已批准"时，反馈隐藏
- ❌ 状态为"待审核"时，反馈不显示

### Q4: 可以修改已批准的项目吗？
**可以**，学生随时可以编辑已批准的项目，但不需要重新审核

### Q5: 管理员可以删除项目吗？
**可以**，在项目列表中有删除按钮，但建议拒绝而不是删除

---

## 📱 页面导航

### 学生的项目详情页
```
URL: /projects/[id]
显示内容：
  ├─ 项目基本信息
  ├─ 项目状态
  ├─ 管理员反馈（如有）
  ├─ 项目检查清单（仅批准后显示）
  ├─ 团队成员
  └─ 编辑按钮
```

### 管理后台审核页面
```
URL: /admin/projects
功能：
  ├─ 统计卡片（总数、待审核、已批准、已拒绝）
  ├─ 状态筛选
  ├─ 项目搜索
  ├─ 项目列表
  │  └─ 点击查看详情
  └─ 详情模态框
     ├─ 项目信息预览
     ├─ 反馈输入框
     └─ 操作按钮
        ├─ ✅ 批准
        ├─ ❌ 拒绝
        └─ ⚙️ 要求修改
```

### 学生的项目编辑页面
```
URL: /projects/[id]/edit
操作：
  ├─ 编辑项目名称、描述、目标
  ├─ 编辑团队成员
  ├─ 添加项目链接
  └─ 保存修改
```

---

## 🎯 工作流最佳实践

### 对管理员的建议
1. **定期检查待审核项目** - 及时给学生反馈
2. **提供具体反馈** - 不要只说"修改"，说明具体问题
3. **使用"要求修改"而不是"拒绝"** - 给学生改进机会
4. **批准后跟进** - 检查学生的项目进度

### 对学生的建议
1. **提交前检查清单** - 确保所有必填字段完整
2. **认真阅读反馈意见** - 修改时针对性解决问题
3. **及时重新提交** - 修改后立即提交，不要拖延
4. **项目批准后主动更新** - 向管理员汇报进度

---

**最后更新**: 2024年1月13日  
**版本**: 1.0  
**维护者**: 开发团队
